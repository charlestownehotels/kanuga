<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./style/style.css">
    <script type="text/javascript" src="./js/script.js"></script>
    <title>Kanuga Map Test</title>
</head>
<body>
    <div id="pop1" class="popbox" title="cottages">
        <h2>Lodges</h2>
   </div>

   <div id="pop2" class="popbox" title="Cottages">
    <h2>Cottages</h2>
   <p>Each of our 43 historic cottages features a porch, a living room with a fireplace and plenty of charm. These fully winterized cottages range in size from two to six bedrooms. Most bedrooms have two beds and private baths.</p>
</div>


    <img class ="map" src="./imgs/Kanuga.jpg" usemap="#image-map">
    <map name="image-map">
    <a href="" class="popper" data-popbox="pop2"><area id="1" target="" alt="1" title="1" href="" coords="617,2195,567,2150" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="2" target="" alt="2" title="2" href="" coords="716,2164,766,2195" shape="rect"></a>  
    <a href="#" class="popper" data-popbox="pop2"><area id="3" target="" alt="3" title="3" href="" coords="888,2164,937,2200" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="4" target="" alt="4" title="4" href="" coords="1041,2150,1095,2186" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="5" target="" alt="5" title="5" href="" coords="1180,2150,1216,2191" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="6" target="" alt="6" title="6" href="" coords="1316,2150,1361,2186" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="7" target="" alt="7" title="7" href="" coords="1230,1916,1266,1943" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2">  <area id="8" target="" alt="8" title="8" href="" coords="1698,1758,1735,1794" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="9" target="" alt="9" title="9" href="" coords="1937,1817,1978,1857" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="10" target="" alt="10" title="10" href="" coords="1973,1736,2018,1772" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="11" target="" alt="11" title="11" href="" coords="2050,1682,2090,1718" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="12" target="" alt="12" title="12" href="" coords="2108,1632,2149,1664" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="13" target="" alt="13" title="13" href="" coords="2149,1582,2190,1623" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="14" target="" alt="14" title="14" href="" coords="2199,1555,2235,1587" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="15" target="" alt="15" title="15" href="" coords="2221,1488,2262,1519" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="16" target="" alt="16" title="16" href="" coords="2573,1474,2618,1506" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="17" target="" alt="17" title="17" href="" coords="2559,1524,2591,1551" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="18" target="" alt="18" title="18" href="" coords="2541,1564,2577,1587" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="19" target="" alt="19" title="19" href="" coords="2509,1605,2545,1632" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="20" target="" alt="20" title="20" href="" coords="2482,1645,2518,1659" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="21" target="" alt="21" title="21" href="" coords="2455,1682,2491,1709" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="22" target="" alt="22" title="22" href="" coords="2424,1727,2464,1745" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="23" target="" alt="23" title="23" href="" coords="2392,1767,2433,1794" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="24" target="" alt="24" title="24" href="" coords="2383,1817,2419,1844" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="25" target="" alt="25" title="25" href="" coords="2379,1884,2410,1902" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="26" target="" alt="26" title="26" href="" coords="2275,1930,2311,1961" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="27" target="" alt="27" title="27" href="" coords="2491,1902,2536,1934" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="28" target="" alt="28" title="28" href="" coords="2604,1862,2649,1898" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="29" target="" alt="29" title="29" href="" coords="2730,1790,2793,1821" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="30" target="" alt="30" title="30" href="" coords="3118,1808,3154,1839" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="31" target="" alt="31" title="31" href="" coords="2996,1866,3037,1893" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="32" target="" alt="32" title="32" href="" coords="2928,1943,2973,1979" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="33" target="" alt="33" title="33" href="" coords="2928,2029,2978,2056" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="34" target="" alt="34" title="34" href="" coords="3082,2024,3118,2047" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="35" target="" alt="35" title="35" href="" coords="3181,2038,3230,2087" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="36" target="" alt="36" title="36" href="" coords="3365,2096,3411,2123" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="37" target="" alt="37" title="37" href="" coords="3559,2146,3600,2168" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"> <area id="38" target="" alt="38" title="38" href="" coords="3771,2182,3816,2218" shape="rect"></a>
    <a href="#" class="popper" data-popbox="pop2"><area id="39" target="" alt="39" title="39" href="" coords="3960,2236,4010,2263" shape="rect"></a>
</map>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
<script>imageMapResize();</script>
<script>
var moveLeft = 0;
var moveDown = 0;
$('a.popper').hover(function (e) {

    var target = '#' + ($(this).attr('data-popbox'));
    $(target).show();
    moveLeft = $(this).outerWidth();
    moveDown = ($(target).outerHeight() / 2);
}, function () {
    var target = '#' + ($(this).attr('data-popbox'));
    if (!($("a.popper").hasClass("show"))) {
        $(target).hide();
    }
});

$('a.popper').mousemove(function (e) {
    var target = '#' + ($(this).attr('data-popbox'));

    leftD = e.pageX + parseInt(moveLeft);
    maxRight = leftD + $(target).outerWidth();
    windowLeft = $(window).width() - 40;
    windowRight = 0;
    maxLeft = e.pageX - (parseInt(moveLeft) + $(target).outerWidth() + 20);

    if (maxRight > windowLeft && maxLeft > windowRight) {
        leftD = maxLeft;
    }

    topD = e.pageY - parseInt(moveDown);
    maxBottom = parseInt(e.pageY + parseInt(moveDown) + 20);
    windowBottom = parseInt(parseInt($(document).scrollTop()) + parseInt($(window).height()));
    maxTop = topD;
    windowTop = parseInt($(document).scrollTop());
    if (maxBottom > windowBottom) {
        topD = windowBottom - $(target).outerHeight() - 20;
    } else if (maxTop < windowTop) {
        topD = windowTop + 20;
    }

    $(target).css('top', topD).css('left', leftD);
});
$('a.popper').click(function (e) {
    var target = '#' + ($(this).attr('data-popbox'));
    if (!($(this).hasClass("show"))) {
        $(target).show();
    }
    $(this).toggleClass("show");
});
</script>
</body>
</html>